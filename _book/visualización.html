<!DOCTYPE html>
<html lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Visualización | Ciencia de Datos para Activismo Jurídico</title>
  <meta name="description" content="4 Visualización | Ciencia de Datos para Activismo Jurídico" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Visualización | Ciencia de Datos para Activismo Jurídico" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="bitsandbricks/CD_AJ" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Visualización | Ciencia de Datos para Activismo Jurídico" />
  
  
  

<meta name="author" content="Antonio Vazquez Brust" />
<meta name="author" content="Demian Zayat" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="poniendo-los-datos-en-forma.html"/>
<link rel="next" href="analisis-de-texto.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Ciencia de Datos para Activismo Jurídico</a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>¿Para quién es esto?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#antes-de-empezar"><i class="fa fa-check"></i>Antes de empezar</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="qué-es-la-ciencia-de-datos.html"><a href="qué-es-la-ciencia-de-datos.html"><i class="fa fa-check"></i><b>1</b> ¿Qué es la ciencia de datos?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="qué-es-la-ciencia-de-datos.html"><a href="qué-es-la-ciencia-de-datos.html#qué-significa-hacer-ciencia-de-datos"><i class="fa fa-check"></i><b>1.1</b> ¿Qué significa hacer ciencia de datos?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html"><i class="fa fa-check"></i><b>2</b> Una presentación a toda marcha de R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#nuestro-primer-proyecto-en-r"><i class="fa fa-check"></i><b>2.1</b> Nuestro primer proyecto en R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#a-investigar-cual-es-la-diferencia-en-mortalidad-infantil-entre-el-sur-y-el-norte-de-la-ciudad-autónoma-de-buenos-aires"><i class="fa fa-check"></i><b>2.1.1</b> A investigar: ¿Cual es la diferencia en mortalidad infantil entre el sur y el norte de la Ciudad Autónoma de Buenos Aires?</a></li>
<li class="chapter" data-level="2.1.2" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#crear-un-proyecto-en-rstudio"><i class="fa fa-check"></i><b>2.1.2</b> Crear un proyecto en RStudio</a></li>
<li class="chapter" data-level="2.1.3" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#escribiendo-un-script"><i class="fa fa-check"></i><b>2.1.3</b> Escribiendo un script</a></li>
<li class="chapter" data-level="2.1.4" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#cargar-los-datos"><i class="fa fa-check"></i><b>2.1.4</b> Cargar los datos</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#visualización-la-exploración-gráfica-de-la-información"><i class="fa fa-check"></i><b>2.2</b> Visualización: la exploración gráfica de la información</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#haciendo-mapas"><i class="fa fa-check"></i><b>2.2.1</b> Haciendo mapas</a></li>
<li class="chapter" data-level="2.2.2" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#agregando-datos"><i class="fa fa-check"></i><b>2.2.2</b> Agregando datos</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#el-veredicto-final"><i class="fa fa-check"></i><b>2.3</b> El veredicto final</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#cuál-es-la-diferencia-en-mortalidad-infantil-entre-el-sur-y-el-norte-de-la-ciudad-autónoma-de-buenos-aires"><i class="fa fa-check"></i><b>2.3.1</b> ¿Cuál es la diferencia en mortalidad infantil entre el sur y el norte de la Ciudad Autónoma de Buenos Aires?</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="una-presentación-a-toda-marcha-de-r.html"><a href="una-presentación-a-toda-marcha-de-r.html#ejercicios"><i class="fa fa-check"></i><b>2.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html"><i class="fa fa-check"></i><b>3</b> Poniendo los datos en forma</a>
<ul>
<li class="chapter" data-level="3.1" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html#primeros-pasos-al-examinar-un-conjunto-de-datos-nuevo"><i class="fa fa-check"></i><b>3.1</b> Primeros pasos al examinar un conjunto de datos nuevo</a></li>
<li class="chapter" data-level="3.2" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html#cruzando-variables-la-operación-join"><i class="fa fa-check"></i><b>3.2</b> Cruzando variables: la operación <code>join</code></a></li>
<li class="chapter" data-level="3.3" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html#transformando-los-datos"><i class="fa fa-check"></i><b>3.3</b> Transformando los datos</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html#seleccionar-columnas-con-select"><i class="fa fa-check"></i><b>3.3.1</b> Seleccionar columnas con <code>select()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html#filtrar-filas-con-filter"><i class="fa fa-check"></i><b>3.3.2</b> Filtrar filas con <code>filter()</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html#ordenar-filas-con-arrange"><i class="fa fa-check"></i><b>3.3.3</b> Ordenar filas con <code>arrange()</code></a></li>
<li class="chapter" data-level="3.3.4" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html#agregar-nuevas-variables-con-mutate"><i class="fa fa-check"></i><b>3.3.4</b> Agregar nuevas variables con <code>mutate()</code></a></li>
<li class="chapter" data-level="3.3.5" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html#extraer-resúmenes-con-summarise"><i class="fa fa-check"></i><b>3.3.5</b> Extraer resúmenes con <code>summarise()</code></a></li>
<li class="chapter" data-level="3.3.6" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html#bonus-el-operador-pipe"><i class="fa fa-check"></i><b>3.3.6</b> ¡BONUS! El operador “pipe”: <code>%&gt;%</code></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="poniendo-los-datos-en-forma.html"><a href="poniendo-los-datos-en-forma.html#ejercicios-1"><i class="fa fa-check"></i><b>3.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visualización.html"><a href="visualización.html"><i class="fa fa-check"></i><b>4</b> Visualización</a>
<ul>
<li class="chapter" data-level="4.1" data-path="visualización.html"><a href="visualización.html#una-buena-visualización-para-empezar-el-scatterplot"><i class="fa fa-check"></i><b>4.1</b> Una buena visualización para empezar: el <em>scatterplot</em></a></li>
<li class="chapter" data-level="4.2" data-path="visualización.html"><a href="visualización.html#ajustando-color-y-tamaño"><i class="fa fa-check"></i><b>4.2</b> Ajustando color y tamaño</a></li>
<li class="chapter" data-level="4.3" data-path="visualización.html"><a href="visualización.html#facetado"><i class="fa fa-check"></i><b>4.3</b> Facetado</a></li>
<li class="chapter" data-level="4.4" data-path="visualización.html"><a href="visualización.html#gráficos-de-barras"><i class="fa fa-check"></i><b>4.4</b> Gráficos de barras</a></li>
<li class="chapter" data-level="4.5" data-path="visualización.html"><a href="visualización.html#histogramas"><i class="fa fa-check"></i><b>4.5</b> Histogramas</a></li>
<li class="chapter" data-level="4.6" data-path="visualización.html"><a href="visualización.html#preparando-una-visualización-para-compartir"><i class="fa fa-check"></i><b>4.6</b> Preparando una visualización para compartir</a></li>
<li class="chapter" data-level="4.7" data-path="visualización.html"><a href="visualización.html#otras-visualizaciones"><i class="fa fa-check"></i><b>4.7</b> Otras visualizaciones</a></li>
<li class="chapter" data-level="4.8" data-path="visualización.html"><a href="visualización.html#ejercicios-2"><i class="fa fa-check"></i><b>4.8</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html"><i class="fa fa-check"></i><b>5</b> Analisis de texto</a>
<ul>
<li class="chapter" data-level="5.1" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#manipulación-de-texto"><i class="fa fa-check"></i><b>5.1</b> Manipulación de texto</a></li>
<li class="chapter" data-level="5.2" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#metacaracteres"><i class="fa fa-check"></i><b>5.2</b> Metacaracteres</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#comienzo-y-fin-de-línea"><i class="fa fa-check"></i><b>5.2.1</b> Comienzo y fin de línea</a></li>
<li class="chapter" data-level="5.2.2" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#clases-de-palabras"><i class="fa fa-check"></i><b>5.2.2</b> Clases de Palabras</a></li>
<li class="chapter" data-level="5.2.3" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#lookaround"><i class="fa fa-check"></i><b>5.2.3</b> Lookaround</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#primer-ejercicio"><i class="fa fa-check"></i><b>5.3</b> Primer ejercicio</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#consiguiendo-los-datos"><i class="fa fa-check"></i><b>5.3.1</b> Consiguiendo los datos</a></li>
<li class="chapter" data-level="5.3.2" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#limpieza-de-datos"><i class="fa fa-check"></i><b>5.3.2</b> Limpieza de datos</a></li>
<li class="chapter" data-level="5.3.3" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#análisis"><i class="fa fa-check"></i><b>5.3.3</b> Análisis</a></li>
<li class="chapter" data-level="5.3.4" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#quienes-hablaron"><i class="fa fa-check"></i><b>5.3.4</b> Quienes hablaron?</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="analisis-de-texto.html"><a href="analisis-de-texto.html#ejercicios-3"><i class="fa fa-check"></i><b>5.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html"><i class="fa fa-check"></i><b>6</b> Información geográfica y mapas</a>
<ul>
<li class="chapter" data-level="6.1" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#los-datos-georreferenciados"><i class="fa fa-check"></i><b>6.1</b> Los datos georreferenciados</a></li>
<li class="chapter" data-level="6.2" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#formatos-de-archivo"><i class="fa fa-check"></i><b>6.2</b> Formatos de archivo</a></li>
<li class="chapter" data-level="6.3" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#explorando-un-archivo-con-información-geográfica"><i class="fa fa-check"></i><b>6.3</b> Explorando un archivo con información geográfica</a></li>
<li class="chapter" data-level="6.4" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#visualizando-información-geográfica"><i class="fa fa-check"></i><b>6.4</b> Visualizando información geográfica</a></li>
<li class="chapter" data-level="6.5" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#volcando-en-el-mapa-información-de-múltiples-fuentes"><i class="fa fa-check"></i><b>6.5</b> Volcando en el mapa información de múltiples fuentes</a></li>
<li class="chapter" data-level="6.6" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#combinando-capas-geográficas"><i class="fa fa-check"></i><b>6.6</b> Combinando capas geográficas</a></li>
<li class="chapter" data-level="6.7" data-path="información-geográfica-y-mapas.html"><a href="información-geográfica-y-mapas.html#ejercicios-4"><i class="fa fa-check"></i><b>6.7</b> Ejercicios</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Ciencia de Datos para Activismo Jurídico</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualización" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Visualización</h1>
<p><img src="imagenes/visualizacion.jpg" width="100%" /></p>
<p>La visualización de información es una de las técnica más poderosas, y a la vez más accesibles, de las que disponemos como analistas de datos. La visualización es el proceso de hacer visibles los contrastes, ritmos y eventos que los datos expresan, que no podemos percibir cuando vienen en forma de áridas listas de números y categorías.</p>
<p>Vamos a aprender a realizar las visualizaciones más usadas, y las opciones de ajuste con las que podemos lograr que luzcan tal como queremos.</p>
<div id="una-buena-visualización-para-empezar-el-scatterplot" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Una buena visualización para empezar: el <em>scatterplot</em></h2>
<p>Los gráficos de dispersión, o <em>scatterplots</em>, son quizás el tipo de visualización más conocido. Consisten en puntos proyectados en un eje de coordenadas, donde cada punto representa una observación. Son útiles para mostrar la correlación entre dos variables numéricas.</p>
<p>Por ejemplo, podríamos asumir que existirá una correlación positiva entre la cantidad de habitantes de una comuna y la cantidad anual de delitos. Es decir que, cuantas más personas vivan en una comuna, es de esperarse que sea mayor la cantidad de robos, hurtos, siniestros viales y homicidios que ocurren allí.</p>
<p>Activamos el paquete <code>tidyverse</code>, si aún no lo habíamos hecho.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="visualización.html#cb107-1"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<p>Y si no lo tenemos ya cargado, leemos de nuevo el dataset con los registros de delitos (esta versión incluye la columna “comuna”).</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="visualización.html#cb108-1"></a>delitos &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://cdaj.netlify.app/data/delitos_barrios_comunas.csv&quot;</span>)</span></code></pre></div>
<p>Usando los verbos de transformación que aprendimos, es fácil obtener un dataframe resumen con indicadores a nivel comuna. Vamos a analizar la cantidad de homicidios.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="visualización.html#cb109-1"></a>homicidios_por_comuna &lt;-<span class="st"> </span>delitos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-2"><a href="visualización.html#cb109-2"></a><span class="st">    </span><span class="kw">filter</span>(tipo <span class="op">==</span><span class="st"> &quot;Homicidio&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-3"><a href="visualización.html#cb109-3"></a><span class="st">    </span><span class="kw">group_by</span>(comuna) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-4"><a href="visualización.html#cb109-4"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">homicidios =</span> <span class="kw">sum</span>(total))</span>
<span id="cb109-5"><a href="visualización.html#cb109-5"></a></span>
<span id="cb109-6"><a href="visualización.html#cb109-6"></a>homicidios_por_comuna</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["comuna"],"name":[1],"type":["int"],"align":["right"]},{"label":["homicidios"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"44"},{"1":"2","2":"6"},{"1":"3","2":"17"},{"1":"4","2":"31"},{"1":"5","2":"5"},{"1":"6","2":"5"},{"1":"7","2":"17"},{"1":"8","2":"18"},{"1":"9","2":"9"},{"1":"10","2":"4"},{"1":"11","2":"8"},{"1":"12","2":"7"},{"1":"13","2":"10"},{"1":"14","2":"8"},{"1":"15","2":"12"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Lo que nos falta ahora es la cantidad de habitantes en cada comuna. <em>No problem</em>. El dato es fácil de conseguir, otra vez cortesía de la Dirección General de Estadística y Censos de la Ciudad de Buenos Aires. Traemos la proyección al año 2020 de la cantidad de habitantes por comuna.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="visualización.html#cb110-1"></a>poblacion &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://cdaj.netlify.app/data/comunas_poblacion_2020.csv&quot;</span>)</span>
<span id="cb110-2"><a href="visualización.html#cb110-2"></a></span>
<span id="cb110-3"><a href="visualización.html#cb110-3"></a>poblacion</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["comuna"],"name":[1],"type":["int"],"align":["right"]},{"label":["poblacion"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"256405"},{"1":"2","2":"149430"},{"1":"3","2":"193276"},{"1":"4","2":"240100"},{"1":"5","2":"187518"},{"1":"6","2":"185456"},{"1":"7","2":"241861"},{"1":"8","2":"228953"},{"1":"9","2":"171264"},{"1":"10","2":"170592"},{"1":"11","2":"190076"},{"1":"12","2":"214777"},{"1":"13","2":"236358"},{"1":"14","2":"227115"},{"1":"15","2":"182465"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Por suerte, ya sabemos como combinar tablas usando <code>left_join()</code></p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="visualización.html#cb111-1"></a>homicidios_por_comuna &lt;-<span class="st"> </span>homicidios_por_comuna <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(poblacion)</span></code></pre></div>
<pre><code>## Joining, by = &quot;comuna&quot;</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="visualización.html#cb113-1"></a>homicidios_por_comuna</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["comuna"],"name":[1],"type":["int"],"align":["right"]},{"label":["homicidios"],"name":[2],"type":["int"],"align":["right"]},{"label":["poblacion"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"44","3":"256405"},{"1":"2","2":"6","3":"149430"},{"1":"3","2":"17","3":"193276"},{"1":"4","2":"31","3":"240100"},{"1":"5","2":"5","3":"187518"},{"1":"6","2":"5","3":"185456"},{"1":"7","2":"17","3":"241861"},{"1":"8","2":"18","3":"228953"},{"1":"9","2":"9","3":"171264"},{"1":"10","2":"4","3":"170592"},{"1":"11","2":"8","3":"190076"},{"1":"12","2":"7","3":"214777"},{"1":"13","2":"10","3":"236358"},{"1":"14","2":"8","3":"227115"},{"1":"15","2":"12","3":"182465"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>!Preparativos terminados! Hagamos por fin nuestro <em>scatterplot</em>. Tal como en el capítulo de introducción a R, continuaremos usando <code>ggplot()</code> para visualizar:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="visualización.html#cb114-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna)</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-89-1.png" width="672" /></p>
<p>¿Un gráfico vacío? Recordemos que ggplot funciona por capas. Primero uno declara el dataframe que va a usar, y luego agrega una o más capas con representaciones de la información. La forma de agregar una capa con un scatterplot, en la práctica dibujar puntos, es con <code>geom_point</code>:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="visualización.html#cb115-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios))</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-90-1.png" width="672" /></p>
<p>Lo que hicimos fue pedirle a ggplot que dibuje un punto por cada fila (representando a cada comuna), con la posición en el eje de las <code>x</code> según su población, y en el eje de las <code>y</code> según la cantidad de contactos registrados. Estas referencias estéticas (<em>aesthetics</em> en inglés) son las que van dentro de la función <code>aes()</code> en <code>geom_point(aes(x = poblacion, y = homicidios))</code></p>
<p>En el extremo superior derecho hay una comuna que sobresale. Podemos identificarla, pidiendo a ggplot que agregue una variable más a la visualización -la comuna. Siendo un gráfico en dos dimensiones, ya no podemos usar la posición para representar un valor; tanto la posición horizontal como la vertical están siendo usadas por población y total. Nuestras opciones son codificar la comuna por color, forma o tamaño del punto. A pesar de que son identificadas con números, las comunas son una variable categórica: no tiene sentido decir que la comuna 1 es “menor” que la comuna 7. Par las variables categóricas, el color suele ser una buena opción de codificación.</p>
<p>Lo hacemos agregando un parámetro <code>color</code> dentro de <code>aes()</code>. Tal como hicimos en el capítulo 2, usamos <code>factor(comuna)</code> en lugar de <code>comuna</code> a secas para indicarle a R que queremos que trate a la variable como categórica:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="visualización.html#cb116-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna) <span class="op">+</span><span class="st"> </span></span>
<span id="cb116-2"><a href="visualización.html#cb116-2"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios, <span class="dt">color =</span> <span class="kw">factor</span>(comuna)))</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-91-1.png" width="672" /></p>
<p>En ese caso, no es tan fácil discernir cuál es cuál, pero mirando con cuidado descubrimos que la comuna 1 es la que tiene mayor población y donde se reportaó la mayor cantidad de homicidios. Lo que nos pasa aquí es que tenemos demasiadas categorías, con lo cual cada una tiene su propio color pero el rango cromático no alcanza para darle a cada una un tono bien distinto al de las demás.</p>
<p>Si necesitamos generar un gráfico que no deje lugar a dudas, lo resolvemos usando un método alternativo para el scatterplot. En lugar de dibujar puntos, podemos poner etiquetas con el nombre de cada comuna.</p>
<p>En lugar de</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="visualización.html#cb117-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna) <span class="op">+</span><span class="st"> </span></span>
<span id="cb117-2"><a href="visualización.html#cb117-2"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios, <span class="dt">color =</span> <span class="kw">factor</span>(comuna)))</span></code></pre></div>
<p>usamos</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="visualización.html#cb118-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna) <span class="op">+</span><span class="st"> </span></span>
<span id="cb118-2"><a href="visualización.html#cb118-2"></a><span class="st">    </span><span class="kw">geom_label</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios, <span class="dt">label =</span> <span class="kw">factor</span>(comuna)))</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-93-1.png" width="672" /></p>
<p>Volvamos a nuestros puntos para practicar dos codificaciones estéticas que no hemos probado, color y tamaño.</p>
<p>Para dejar aún más clara la diferencia de homicidios entre comunas, podríamos usar el tamaño (<em>size</em>) de cada punto para representar esa variable, además de su altura en el gráfico.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="visualización.html#cb119-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna) <span class="op">+</span><span class="st"> </span></span>
<span id="cb119-2"><a href="visualización.html#cb119-2"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios, <span class="dt">size =</span> homicidios))</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-94-1.png" width="672" /></p>
<p>Y para distinguir cuál es cuál, podemos pedirle a ggplot que cambie la forma (<em>shape</em>) de cada punto según la comuna a la que corresponde.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="visualización.html#cb120-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna) <span class="op">+</span><span class="st"> </span></span>
<span id="cb120-2"><a href="visualización.html#cb120-2"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios, <span class="dt">shape =</span> <span class="kw">factor</span>(comuna)))</span></code></pre></div>
<pre><code>## Warning: The shape palette can deal with a maximum of 6 discrete values because
## more than 6 becomes difficult to discriminate; you have 15. Consider
## specifying shapes manually if you must have them.</code></pre>
<pre><code>## Warning: Removed 9 rows containing missing values (geom_point).</code></pre>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-95-1.png" width="672" /></p>
<p>¡Hey, sólo aparecen seis de las comunas! <code>ggplot()</code> usa cómo máximo 6 formas distintas, debido a que una cantidad mayor sería de veras muy difícil de discernir para nuestros pobres ojos. Moraleja: la estética <code>shape</code> sirve sólo cuando manejamos pocas categorías. De todas formas podría opinarse que es el método de codificación que menos gracia tiene, así que no es grave que su utilidad sea limitada.</p>
</div>
<div id="ajustando-color-y-tamaño" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Ajustando color y tamaño</h2>
<p>Hemos visto que especificando atributos estéticos y las variables que representan dentro
de <code>aes()</code> podemos ajustas posición, tamaño, color y hasta la forma de los puntos de acuerdo a sus valores. Pero, ¿qué pasa si queremos usar un tamaño o un color arbitrario para nuestros puntos? Es decir, si no nos gusta el color negro y queremos que sean todos azules, o si nos parece que se ven pequeños y queremos que sean todos un poco más grandes. Fácil: definimos el <code>color</code> o <code>size</code> que queremos por fuera de las función <code>aes()</code>, y será aplicado a todos los puntos.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="visualización.html#cb123-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna) <span class="op">+</span><span class="st"> </span></span>
<span id="cb123-2"><a href="visualización.html#cb123-2"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios), <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-96-1.png" width="672" /></p>
<p>Obsérvese que <code>color = "blue"</code> está escrito por fuera de los paréntesis de <code>aes()</code>. De paso, hicimos uso de una característica muy práctica de R: reconoce un montón de colores por su nombre, siempre que los escribamos entre comillas. Si le decimos <code>color = "blue"</code>, <code>color = "red"</code>, <code>color = "yellow"</code>, etc., sabe de que hablamos. Una lista de todos los colores que R reconoce, ideal como referencia, se puede encontrar en <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf" class="uri">http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf</a> ; ¡son más de 600!.</p>
<p>Tras un vistazo a la lista, me decido por “darkolivegreen4”:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="visualización.html#cb124-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna) <span class="op">+</span><span class="st"> </span></span>
<span id="cb124-2"><a href="visualización.html#cb124-2"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios), <span class="dt">color =</span> <span class="st">&quot;darkolivegreen4&quot;</span>)</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-97-1.png" width="672" /></p>
<p>Queda claro que podemos asignar el color que queramos.</p>
<p>En cuanto al tamaño, la fórmula es la misma:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="visualización.html#cb125-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna) <span class="op">+</span><span class="st"> </span></span>
<span id="cb125-2"><a href="visualización.html#cb125-2"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios), <span class="dt">size =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-98-1.png" width="672" /></p>
<p>El valor de <code>size</code> se da en píxeles. Es una medida difícil de estimar antes de ver el resultado, pero es cuestión de probar algunos valores distintos hasta encontrar el que nos va bien. Por supuesto, podemos ajustar varios, o todos, los atributos a la vez</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="visualización.html#cb126-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna) <span class="op">+</span><span class="st"> </span></span>
<span id="cb126-2"><a href="visualización.html#cb126-2"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios), </span>
<span id="cb126-3"><a href="visualización.html#cb126-3"></a>               <span class="dt">size =</span> <span class="dv">9</span>, <span class="dt">color =</span> <span class="st">&quot;chocolate3&quot;</span>, <span class="dt">shape =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-99-1.png" width="672" /></p>
</div>
<div id="facetado" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Facetado</h2>
<p>Ya sabemos como representar variables usando atributos estéticos. Con esa técnica podemos mostrar con claridad dos o tres variables en un plano bidimensional (nuestro gráfico). Pero cuando si queremos agregar más atributos para codificar variables adicionales, la visualización pierde legibilidad de inmediato. Por suerte existe otra técnica, que podemos usar en combinación con la estética, para agregar aún más variables: el facetado.</p>
<p>Las facetas son múltiples gráficos contiguos, con cada uno mostrando un subconjunto de los datos. Son útiles sobre todo para variables categóricas.</p>
<p>Practiquemos con un ejemplo. Sabemos que en la comuna 1 se registra una cantidad de homicidios mayor que en las demás. ¿La diferencia será igual para todas las categorías de homicidio, o existe alguna en particular que es la que inclina la balanza?</p>
<p>En nuestro dataframe original, para cada incidente tenemos las columnas “tipo” y “subtipo”. Para revisar rápido cuales son las combinaciones posibles de éstas categorías podemos armar una <em>tabla de contingencia</em>, un conteo de las combinaciones de categorías según aparecen en nuestros datos. Presentemos entonces a la función <code>count()</code>, que nos puede dar una mano.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="visualización.html#cb127-1"></a>delitos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb127-2"><a href="visualización.html#cb127-2"></a><span class="st">    </span><span class="kw">count</span>(tipo, subtipo)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["tipo"],"name":[1],"type":["chr"],"align":["left"]},{"label":["subtipo"],"name":[2],"type":["chr"],"align":["left"]},{"label":["n"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"Homicidio","2":"Doloso","3":"81"},{"1":"Homicidio","2":"Femicidio","3":"10"},{"1":"Homicidio","2":"Femicidio Intrafamiliar","3":"1"},{"1":"Homicidio","2":"Siniestro Vial","3":"69"},{"1":"Homicidio","2":"Travesticidio/Transfemicidio","3":"2"},{"1":"Hurto (sin violencia)","2":"","3":"583"},{"1":"Hurto (sin violencia)","2":"Hurto Automotor","3":"504"},{"1":"Lesiones","2":"Siniestro Vial","3":"575"},{"1":"Robo (con violencia)","2":"","3":"583"},{"1":"Robo (con violencia)","2":"Con uso de moto","3":"517"},{"1":"Robo (con violencia)","2":"Robo Automotor","3":"263"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Para el tipo “Homicidio” encontramos los subtipos “Doloso”, “Femicidio”, Femicidio Intrafamiliar“,”Siniestro Vial“, y”Travesticidio/Transfemicidio". Podemos usar esas subcategorías para mostrar como componen el total de homicidios de cada comuna.</p>
<p>Agrupamos entonces nuestra data de homicidios por comuna y también por subtipo, sin olvidar agregar luego los datos de población</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="visualización.html#cb128-1"></a>homicidios_por_comuna_y_subtipo &lt;-<span class="st"> </span>delitos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb128-2"><a href="visualización.html#cb128-2"></a><span class="st">    </span><span class="kw">filter</span>(tipo <span class="op">==</span><span class="st"> &quot;Homicidio&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb128-3"><a href="visualización.html#cb128-3"></a><span class="st">    </span><span class="kw">group_by</span>(comuna, subtipo) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb128-4"><a href="visualización.html#cb128-4"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">homicidios =</span> <span class="kw">sum</span>(total)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb128-5"><a href="visualización.html#cb128-5"></a><span class="st">    </span><span class="kw">left_join</span>(poblacion)</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;comuna&#39;. You can override using the `.groups` argument.</code></pre>
<pre><code>## Joining, by = &quot;comuna&quot;</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="visualización.html#cb131-1"></a><span class="kw">head</span>(homicidios_por_comuna_y_subtipo)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["comuna"],"name":[1],"type":["int"],"align":["right"]},{"label":["subtipo"],"name":[2],"type":["chr"],"align":["left"]},{"label":["homicidios"],"name":[3],"type":["int"],"align":["right"]},{"label":["poblacion"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"Doloso","3":"32","4":"256405"},{"1":"1","2":"Femicidio","3":"1","4":"256405"},{"1":"1","2":"Siniestro Vial","3":"11","4":"256405"},{"1":"2","2":"Doloso","3":"2","4":"149430"},{"1":"2","2":"Siniestro Vial","3":"4","4":"149430"},{"1":"3","2":"Doloso","3":"6","4":"193276"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Listos para facetar. Producimos un scatterplot igual que antes, y le agregamos una capa adicional con <code>facet_wrap()</code>. La variable a “facetar”, la que recibirá un gráfico por cada una de sus categorías, siempre se escribe a continuación del signo <code>~</code>; en nuestro caso, queda como <code>~subtipo</code>. El simbolillo en cuestión denota lo que en R se denomina una <em>fórmula</em> y ya nos lo cruzaremos de nuevo, pero por ahora no le prestamos más atención.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="visualización.html#cb132-1"></a><span class="kw">ggplot</span>(homicidios_por_comuna_y_subtipo) <span class="op">+</span><span class="st"> </span></span>
<span id="cb132-2"><a href="visualización.html#cb132-2"></a><span class="st">    </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> poblacion, <span class="dt">y =</span> homicidios)) <span class="op">+</span></span>
<span id="cb132-3"><a href="visualización.html#cb132-3"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>subtipo)</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-102-1.png" width="672" /></p>
<p>La notable cantidad de casos en la comuna 1 se debe a los homicidios dolosos; en ninguna otra categoría se separa tanto del resto. ¿Qué tiene de particular esta comuna? Es la más poblada, si, pero aún en proporción per cápita parece separarse de las demás (junto con otra comuna, la 4, que le sigue en población y en número de casos).</p>
<p>Vale la pregunta, por ahora sin respuesta, para mencionar algo fundamental: por más ciencia de datos que apliquemos, siempre vamos a llegar a un punto en que nuestros hallazgos no tendrán sentido sin combinarlos con lo que se llama “conocimiento de dominio”. El conocimiento de dominio es el saber especializado sobre el tema que estamos tratando, sea el ciclo reproductivo de la gaviota austral o la organización administrativa del Gobierno de la Ciudad Autónoma de Buenos Aires. Esto no debería desanimarnos, ¡al contrario!. El análisis de datos como profesión conlleva un constante aprendizaje sobre los más variados temas. Y a la inversa: si somos expertos en cualquier campo, aún con un puñado de técnicas básicas de R podemos extraer conocimiento de nuestros datos que jamas encontraría una persona, aún experta en programación, que no conozca el contexto.</p>
</div>
<div id="gráficos-de-barras" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Gráficos de barras</h2>
<p>Si hay un tipo de visualización que compite en popularidad con el <em>scatterplot</em>, son los gráficos de barras (<em>bar charts</em> en inglés). Solemos encontrarlos acompañando artículos en diarios y revistas, sin duda porque son fáciles de leer de un vistazo. Los gráficos de barras se usan mucho para hacer comparaciones: quién tiene más y quién tiene menos de alguna variable continua cómo ingresos, edad, altura o similares.</p>
<p>Comparemos la suma total de registros que alcanza cada barrio. Con <code>geom_bar</code> podemos agregar una capa de visualización con gráficos de barras. Los parámetros a definir dentro de <code>aes()</code> son <code>x</code>, donde va una variable categórica, y en forma opcional <code>weight</code>, que indica la variable a sumar para determinar la altura de cada barra. Si no especificamos un <code>weight</code>, simplemente se cuenta cuantas veces aparece cada categoría en el dataframe, en la práctica un conteo o frecuencia de aparición. En nuestro dataset cada fila incluye un período y un total de contactos recibidos. Nosotros no estamos interesados en cuantas veces aparece cada barrio, sino en la suma de la columna total para cada uno de ellos, así que vamos a usar <code>weight = total</code>.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="visualización.html#cb133-1"></a><span class="kw">ggplot</span>(delitos) <span class="op">+</span></span>
<span id="cb133-2"><a href="visualización.html#cb133-2"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> barrio, <span class="dt">weight =</span> total))</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-103-1.png" width="672" /></p>
<p>Tenemos un problema. Los nombres de los barrios resultan ilegibles, porque no tienen espacio suficiente para evitar que aparezcan superpuestos. En un gráfico, el eje horizontal es un muy mal lugar para poner muchas categorías con nombre, ya que el solapamiento se vuelve inevitable. Sería mejor tener los nombre en el eje vertical, donde se pueden escribir uno encima del otro sin pisarse ¡La solución es invertir los ejes de de coordenadas! Sólo necesitamos agregar <code>coord_flip</code>:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="visualización.html#cb134-1"></a><span class="kw">ggplot</span>(delitos) <span class="op">+</span></span>
<span id="cb134-2"><a href="visualización.html#cb134-2"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> barrio, <span class="dt">weight =</span> total)) <span class="op">+</span></span>
<span id="cb134-3"><a href="visualización.html#cb134-3"></a><span class="st">    </span><span class="kw">coord_flip</span>()</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-104-1.png" width="672" /></p>
<p>Ahora si podemos interpretar el gráfico. Además de identificar los barrios que acumulan más registros, este gráfico muestra una situación curiosa, que hasta podría indicar un error en la fuente de datos: en el barrio de La Boca aparentemente no han ocurrido delitos dignos de aparecer en el dataset.</p>
<p>Los gráficos de barras, además de comparar, también son buenos para mostrar la composición interna de las cosas: que “hay dentro”, que componentes contribuye a un determinado total. Vamos a mostrar entonces cuanto contribuye cada tipo de trámite al total por barrio, usando el parámetro estético <code>fill</code> (relleno). <code>geom_bar</code> realiza un segmentado automático de cada barra, con la proporción que le corresponde a cada subcategoría:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="visualización.html#cb135-1"></a><span class="kw">ggplot</span>(delitos) <span class="op">+</span></span>
<span id="cb135-2"><a href="visualización.html#cb135-2"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> barrio, <span class="dt">weight =</span> total, <span class="dt">fill =</span> tipo)) <span class="op">+</span></span>
<span id="cb135-3"><a href="visualización.html#cb135-3"></a><span class="st">    </span><span class="kw">coord_flip</span>()</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-105-1.png" width="672" /></p>
<p>Ahora se ve que robo y hurto son los tipos más frecuentes, en todos los barrios.</p>
<p>En lugar de relleno podríamos haber usado <code>color</code>, tal como hicimos con los puntos, pero los resultado es un poco menos legible y no luce tan bien. La variable <code>color</code> modifica la silueta de las barras, pero no su interior:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="visualización.html#cb136-1"></a><span class="kw">ggplot</span>(delitos) <span class="op">+</span></span>
<span id="cb136-2"><a href="visualización.html#cb136-2"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> barrio, <span class="dt">weight =</span> total, <span class="dt">color =</span> tipo)) <span class="op">+</span></span>
<span id="cb136-3"><a href="visualización.html#cb136-3"></a><span class="st">    </span><span class="kw">coord_flip</span>()</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-106-1.png" width="672" /></p>
<p>También podemos dejar de lado los barrios, y concentrarnos en las categorías. Si quisiéramos ver el total de registros por cada sub-tipo de incidente:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="visualización.html#cb137-1"></a><span class="kw">ggplot</span>(delitos) <span class="op">+</span></span>
<span id="cb137-2"><a href="visualización.html#cb137-2"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> tipo, <span class="dt">weight =</span> total)) </span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>
<p>Notamos que los homicidios y lesiones son eventos poco frecuentes en comparación con las otras clases. En esta ocasión no recurrimos a <code>coord_flip</code>, ya que las categorías son pocas y tienen espacio suficiente en el eje horizontal.</p>
<p>¿Y si mostramos el aporte de cada barrio al total global de cada tipo de incidente?</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="visualización.html#cb138-1"></a><span class="kw">ggplot</span>(delitos) <span class="op">+</span></span>
<span id="cb138-2"><a href="visualización.html#cb138-2"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> tipo, <span class="dt">weight =</span> total, <span class="dt">fill =</span> barrio)) </span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-108-1.png" width="672" /></p>
<p>Hemos obtenido una visualización indigerible. ¡Son demasiadas categorías como para diferenciarlas por color!</p>
<p>Quizás con un facetado por barrio…</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="visualización.html#cb139-1"></a><span class="kw">ggplot</span>(delitos) <span class="op">+</span></span>
<span id="cb139-2"><a href="visualización.html#cb139-2"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> tipo, <span class="dt">weight =</span> total)) <span class="op">+</span></span>
<span id="cb139-3"><a href="visualización.html#cb139-3"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>barrio)</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-109-1.png" width="672" /></p>
<p>Esta opción es un poco mejor, ya que al menos permite identificar pronto los barrios salientes, y discernir diferencias generales si se la mira con paciencia. Una visualización tan densa en información puede resultar ideal para “uso personal”, explorando de forma rápida datos con los que estamos familiarizados, pero es poco recomendable para compartir con otros.</p>
<p>En general, para evitar la confusión asociada a variables con docenas de categorías se busca simplificar definiendo menos grupos. Por ejemplo, como hicimos al comienzo al separar por comunas, que son sólo quince, en lugar de por barrios.</p>
</div>
<div id="histogramas" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Histogramas</h2>
<p>Los histogramas son usados para mostrar la <em>distribución</em> de una variable continua. El histograma permite decir si los valores que toma cada observación se agrupan en torno a un valor “típico” o medio -como en el caso de la llamada <em>distribución normal</em>-, o en torno a dos valores frecuentes (<em>distribución bimodal</em>), o con dispersión sin picos ni valles, donde no hay valores típicos ni atípicos - <em>distribución uniforme</em>.</p>
<p>Por ejemplo, veamos la distribución de los barrios respecto a la variable “cantidad anual de delitos”. Para contabilizar el total de registros por barrio tenemos que agrupar los valores de esa columna, y hacer un resumen (<code>summarise()</code>) que extraiga el gran total:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="visualización.html#cb140-1"></a>delitos_anuales &lt;-<span class="st"> </span>delitos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb140-2"><a href="visualización.html#cb140-2"></a><span class="st">    </span><span class="kw">group_by</span>(barrio) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb140-3"><a href="visualización.html#cb140-3"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">gran_total =</span> <span class="kw">sum</span>(total))</span>
<span id="cb140-4"><a href="visualización.html#cb140-4"></a></span>
<span id="cb140-5"><a href="visualización.html#cb140-5"></a>delitos_anuales</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["barrio"],"name":[1],"type":["chr"],"align":["left"]},{"label":["gran_total"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"","2":"411"},{"1":"Agronomía","2":"208"},{"1":"Almagro","2":"2748"},{"1":"Balvanera","2":"4503"},{"1":"Barracas","2":"2422"},{"1":"Belgrano","2":"2238"},{"1":"Boca","2":"1059"},{"1":"Boedo","2":"1213"},{"1":"Caballito","2":"3050"},{"1":"Chacarita","2":"920"},{"1":"Coghlan","2":"260"},{"1":"Colegiales","2":"834"},{"1":"Constitución","2":"1910"},{"1":"Flores","2":"3425"},{"1":"Floresta","2":"852"},{"1":"La Boca","2":"1"},{"1":"Liniers","2":"1010"},{"1":"Mataderos","2":"1671"},{"1":"Monserrat","2":"1375"},{"1":"Monte Castro","2":"498"},{"1":"Nueva Pompeya","2":"1712"},{"1":"Nuñez","2":"1041"},{"1":"Palermo","2":"5467"},{"1":"Parque Avellaneda","2":"1113"},{"1":"Parque Chacabuco","2":"1536"},{"1":"Parque Chas","2":"254"},{"1":"Parque Patricios","2":"1273"},{"1":"Paternal","2":"385"},{"1":"Puerto Madero","2":"129"},{"1":"Recoleta","2":"3018"},{"1":"Retiro","2":"1842"},{"1":"Saavedra","2":"1076"},{"1":"San Cristóbal","2":"1357"},{"1":"San Nicolás","2":"2064"},{"1":"San Telmo","2":"672"},{"1":"Vélez Sársfield","2":"523"},{"1":"Versalles","2":"268"},{"1":"Villa Crespo","2":"1878"},{"1":"Villa Del Parque","2":"818"},{"1":"Villa Devoto","2":"1028"},{"1":"Villa Gral. Mitre","2":"649"},{"1":"Villa Lugano","2":"2462"},{"1":"Villa Luro","2":"538"},{"1":"Villa Ortuzar","2":"357"},{"1":"Villa Pueyrredón","2":"664"},{"1":"Villa Real","2":"186"},{"1":"Villa Riachuelo","2":"373"},{"1":"Villa Santa Rita","2":"568"},{"1":"Villa Soldati","2":"1493"},{"1":"Villa Urquiza","2":"1373"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="tip">
<p>En la tabla de delistos anuales la primera fila tiene vacía la celda de barrio. Esto es porque representa los delitos para los cuales no se conoce el sitio donde ocurrieron. Es decir, muestra el total de delitos encontrados en filas donde la la variable “barrio” es <code>NA</code>.</p>
</div>
<p>Hacer un histograma es simple con <code>geom_histogram()</code>: sólo hay que elegir una variable y asignarla a las <code>x</code>.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="visualización.html#cb141-1"></a><span class="kw">ggplot</span>(delitos_anuales) <span class="op">+</span><span class="st"> </span></span>
<span id="cb141-2"><a href="visualización.html#cb141-2"></a><span class="st">    </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x =</span> gran_total))</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-111-1.png" width="672" /></p>
<p><code>geom_histogram()</code> divide el rango de valores en una cantidad arbitraria de segmentos iguales (<em>bins</em> en inglés) y cuenta cuántas observaciones caen en cada uno, cantidad que se representa con la altura de la columna en el eje de las <code>y</code>.</p>
<p>En nuestro ejemplo, vemos que la cantidad de registros tiende a agruparse en torno a un valor típico de bastante menos de 1.000 al mes. Aún así, par un par de barrios se contablizaron más de 4.000.</p>
<p>No sería raro que la agregación que hicimos nos oculte patrones en los datos. Que pasa si contamos los registros por mes y por tipo de contacto, y mostramos los histogramas mensuales en facetado por tipo?</p>
<p>Hacemos el agrupado y sumario de rigor,</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="visualización.html#cb143-1"></a>delitos_anuales_por_tipo &lt;-<span class="st"> </span>delitos_anuales &lt;-<span class="st"> </span>delitos <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb143-2"><a href="visualización.html#cb143-2"></a><span class="st">    </span><span class="kw">group_by</span>(barrio, tipo) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb143-3"><a href="visualización.html#cb143-3"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">gran_total =</span> <span class="kw">sum</span>(total))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;barrio&#39;. You can override using the `.groups` argument.</code></pre>
<p>y creamos el facetado como ya sabemos:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="visualización.html#cb145-1"></a><span class="kw">ggplot</span>(delitos_anuales_por_tipo) <span class="op">+</span><span class="st"> </span></span>
<span id="cb145-2"><a href="visualización.html#cb145-2"></a><span class="st">    </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x =</span> gran_total)) <span class="op">+</span></span>
<span id="cb145-3"><a href="visualización.html#cb145-3"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>tipo)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-113-1.png" width="672" /></p>
<p>Aparecen las diferencias. Los homicidios tienen una dispersión mínima, con casi todas las observaciones apiladas en torno a un puñado de casos; siempre son bajas. La cantidad anual de lesiones muestra una dispersión mayor, pero aún así con tendencia a rondar un valor típico. Los hurtos y robos se comportan distinto, ya que muestran una gran dispersión, pudiendo tomar cualquier valor desde una decenas a más de 2.000 registros de forma bastante pareja.</p>
</div>
<div id="preparando-una-visualización-para-compartir" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Preparando una visualización para compartir</h2>
<p>Lo último que nos queda por decir en este capítulo es que los gráficos que hemos producido hasta aquí están pensando para nuestro propio consumo. Son parte, y parte fundamental, de lo que llamamos análisis exploratorio de datos. En el contexto de la exploración, lo importante es trabajar en forma rápida, probando una u otra técnica de visualización y refinando nuestros resultados hasta hallar patrones interesantes, o sacarnos dudas acerca de los datos. No necesitamos ponerle título a las visualizaciones, porque ya sabemos de que tratan (¡acabamos de escribirlas!). No nos preocupa que los nombres de los ejes indiquen en forma clara la variable representan, porque ya lo sabemos de antemano.</p>
<p>Pero cuando queremos guardar un gráfico para compartir con otros, sea publicándola en un paper, o enviándola por email a un amigo, necesitamos tener más cuidado. Hemos pasado del ámbito de la exploración al de la comunicación. Ahora si debe preocuparnos la claridad, porque no sabemos el grado de familiaridad que tiene con los datos la eventual audiencia.</p>
<p>Si bien la comunicación clara es un arte cuyas reglas dependen del contexto, y además cada quien tiene su estilo, podemos decretar al menos tres elementos que no deberían faltar en un gráfico destinado a comunicar algo a los demás:</p>
<ul>
<li>Un título descriptivo, pero breve</li>
<li>Etiquetas claras (no ambiguas) en los ejes</li>
<li>Nombres descriptivos en las leyendas</li>
</ul>
<p>y ya que estamos, dos opcionales:</p>
<ul>
<li>Un subtítulo donde poner detalles importantes que no entran en un título breve</li>
<li>Una nota al pie con información adicional: fuente de los datos, cita académica, advertencias, etc.</li>
</ul>
<p>Con <code>ggplot()</code> podemos encargarnos de todo dentro de una sola función, <code>labs()</code> (por <em>labels</em>, etiquetas)</p>
<p>Tomemos un gráfico de los que hicimos antes para pulirlo un poco y que sirva de ejemplo. El original:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="visualización.html#cb147-1"></a><span class="kw">ggplot</span>(delitos) <span class="op">+</span></span>
<span id="cb147-2"><a href="visualización.html#cb147-2"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> barrio, <span class="dt">weight =</span> total, <span class="dt">fill =</span> tipo)) <span class="op">+</span></span>
<span id="cb147-3"><a href="visualización.html#cb147-3"></a><span class="st">    </span><span class="kw">coord_flip</span>()</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-114-1.png" width="672" /></p>
<p>versus la versión pulida usando <code>labs()</code>:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="visualización.html#cb148-1"></a><span class="kw">ggplot</span>(delitos) <span class="op">+</span></span>
<span id="cb148-2"><a href="visualización.html#cb148-2"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> barrio, <span class="dt">weight =</span> total, <span class="dt">fill =</span> tipo)) <span class="op">+</span></span>
<span id="cb148-3"><a href="visualización.html#cb148-3"></a><span class="st">    </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb148-4"><a href="visualización.html#cb148-4"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Delitos registrados&quot;</span>,</span>
<span id="cb148-5"><a href="visualización.html#cb148-5"></a>         <span class="dt">subtitle =</span> <span class="st">&quot;Ciudad Autónoma de Buenos Aires, 2020&quot;</span>,</span>
<span id="cb148-6"><a href="visualización.html#cb148-6"></a>         <span class="dt">caption =</span> <span class="st">&quot;Fuente: portal de datos abiertos de la Ciudad - http://data.buenosaires.gob.ar&quot;</span>,</span>
<span id="cb148-7"><a href="visualización.html#cb148-7"></a>         <span class="dt">x =</span> <span class="st">&quot;barrio&quot;</span>,</span>
<span id="cb148-8"><a href="visualización.html#cb148-8"></a>         <span class="dt">y =</span> <span class="st">&quot;cantidad&quot;</span>,</span>
<span id="cb148-9"><a href="visualización.html#cb148-9"></a>         <span class="dt">fill =</span> <span class="st">&quot;Tipo&quot;</span>)</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-115-1.png" width="768" /></p>
<p>Ya tiene todo el contenido necesario. Ahora si, a compartir.</p>
<p>En cuanto a la presentación (el aspecto), podríamos hacer un ajuste final que dependerá de nuestros gustos. Los gráficos generados por <code>ggplot()</code> llevan ese panel gris neutro como fondo, que es característico: es fácil reconocer un gráfico hecho con ggplot al verlo en una publicación o sitio web. Sin embargo, nada nos obliga a usar el diseño definido por defecto. Podemos cambiar la tipografía, los colores usados para representar datos, el color de fondo… ¡todos y cada uno de los componentes! Una forma sencilla de hacer cambios es aprovechar los “temas” (combinaciones de colores) que el paquete <code>ggplot2</code> incluye listos para usar. Para elegir un estilo sólo necesitamos agregar una capa de las que comienza con “theme_…”, por ejemplo <code>theme_minimal()</code>, <code>theme_dark()</code>, <code>theme_classic()</code>.</p>
<p>En mi experiencia, el que mejor luce en la gran mayoría de los casos es <code>theme_minimal</code>. Vamos a usarlo, repitiendo el código que generó la última visualización que hicimos, y agregando una línea al final para definir el tema.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="visualización.html#cb149-1"></a><span class="kw">ggplot</span>(delitos) <span class="op">+</span></span>
<span id="cb149-2"><a href="visualización.html#cb149-2"></a><span class="st">    </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">x =</span> barrio, <span class="dt">weight =</span> total, <span class="dt">fill =</span> tipo)) <span class="op">+</span></span>
<span id="cb149-3"><a href="visualización.html#cb149-3"></a><span class="st">    </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb149-4"><a href="visualización.html#cb149-4"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Delitos registrados&quot;</span>,</span>
<span id="cb149-5"><a href="visualización.html#cb149-5"></a>         <span class="dt">subtitle =</span> <span class="st">&quot;Ciudad Autónoma de Buenos Aires, 2020&quot;</span>,</span>
<span id="cb149-6"><a href="visualización.html#cb149-6"></a>         <span class="dt">caption =</span> <span class="st">&quot;Fuente: portal de datos abiertos de la Ciudad - http://data.buenosaires.gob.ar&quot;</span>,</span>
<span id="cb149-7"><a href="visualización.html#cb149-7"></a>         <span class="dt">x =</span> <span class="st">&quot;barrio&quot;</span>,</span>
<span id="cb149-8"><a href="visualización.html#cb149-8"></a>         <span class="dt">y =</span> <span class="st">&quot;cantidad&quot;</span>,</span>
<span id="cb149-9"><a href="visualización.html#cb149-9"></a>         <span class="dt">fill =</span> <span class="st">&quot;Tipo&quot;</span>) <span class="op">+</span></span>
<span id="cb149-10"><a href="visualización.html#cb149-10"></a><span class="st">    </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="CD_AJ_files/figure-html/unnamed-chunk-116-1.png" width="768" /></p>
<p>…no esta mal, ¿verdad?</p>
</div>
<div id="otras-visualizaciones" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Otras visualizaciones</h2>
<p>Por supuesto, las opciones que hemos repasado son apenas una fracción de la enorme variedad de técnicas de visualización que existen. Para empezar, nos falta hablar de los mapas, una categoría tan importante que tiene un capítulo completo dedicado más adelante.</p>
<p>Y aún quedan tantas por discutir, que sería imposible hacerles justicia en un libro introductorio. Con nombres tan variopintos como <em>waffle charts</em>, <em>violin plots</em>, o <em>tree maps</em>, existen quizás un centenar o más de métodos bien documentados para explorar información en forma visual.</p>
<p>El sitio web <em>from Data to Viz</em> (<a href="https://www.data-to-viz.com/" class="uri">https://www.data-to-viz.com/</a>) es un recurso excelente para investigar opciones. Contiene un compendio visual e interactivo de técnicas de visualización con sus nombres y características generales. También explica a que familia corresponde cada una, y para qué suele usarse (mostrar relaciones, distribuciones, cambio a través del tiempo, etc).</p>
<div class="figure"><span id="fig:unnamed-chunk-117"></span>
<img src="imagenes/data_to_viz.png" alt="from Data to Viz - www.data-to-viz.com/" width="100%" />
<p class="caption">
Figura 4.1: from Data to Viz - www.data-to-viz.com/
</p>
</div>
<p>Y lo más interesante: Para todas y cada una de las visualizaciones se incluye el código en R que permite reproducirlas. A partir de allí sólo es cuestión de adaptar los ejemplos a nuestros datos para realizar de forma fácil la visualización que nos interesa.</p>
</div>
<div id="ejercicios-2" class="section level2" number="4.8">
<h2><span class="header-section-number">4.8</span> Ejercicios</h2>
<p>I. Tomemos un dataset, y efectuemos las transformaciones necesarias para luego crear las siguientes visualizaciones:</p>
<ul>
<li><em>Scatter plot</em>, o gráfico de dispersión: Mostrar correlación entre 2 variables numéricas.</li>
<li>Gráfico de Barras: Comparar variables categóricas.</li>
<li>Gráfico de Barras: Comparar variables categóricas mostrando la composición interna de las mismas.<br />
</li>
<li>Histograma: Mostrar la distribución de una variable continua.</li>
</ul>
<ol start="2" style="list-style-type: upper-roman">
<li><p>Realicemos una versión facetada (con <code>facet_wrap()</code>) de cada tipo de gráfico.</p></li>
<li><p>Pongamos a cada visualización su título, subtítulo, etiquetas en los ejes, nombre descriptivo en la leyenda y nota al pie.</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="poniendo-los-datos-en-forma.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="analisis-de-texto.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["CD_AJ.pdf", "CD_AJ.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
